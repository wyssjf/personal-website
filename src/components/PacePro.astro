---
// Pace Pro | Precision Training Engine
// Complete Style Isolation Build for Jay Wyss, MPA
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Pace Pro | J.R. Tucker Varsity</title>
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#020617" />
</head>
<body id="pace-pro-app">
    <div class="wrapper">
        <header>
            <h1>PACE <span class="sky">PRO</span></h1>
            <button id="unit-toggle" class="toggle-btn">Units: Imperial (Miles)</button>
        </header>

        <section class="control-panel">
            <select id="dist-select" class="main-select">
                <option value="800">800m</option>
                <option value="1600">1,600m</option>
                <option value="3200">3,200m</option>
                <option value="5000" selected>5,000m (5K)</option>
                <option value="10000">10,000m (10K)</option>
                <option value="21098">Half Marathon</option>
                <option value="42195">Marathon</option>
            </select>

            <div class="time-display">
                <div id="hr-wrap" class="hidden">
                    <input type="number" id="hr" value="0" class="t-input" />
                    <span class="sep">:</span>
                </div>
                <input type="number" id="min" value="18" class="t-input" />
                <span class="sep">:</span>
                <input type="number" id="sec" value="20" class="t-input" />
            </div>

            <div class="fudge-box">
                <div class="f-header">
                    <span>Fudge Factor</span>
                    <span id="fudge-val">0%</span>
                </div>
                <input type="range" id="fudge-slider" min="-5" max="5" value="0" step="1" />
            </div>
        </section>

        <h2 class="section-label">Equivalent Race Results</h2>
        <div id="equiv-list" class="list-container"></div>

        <h2 class="section-label">Training Intensities</h2>
        <div id="training-engine" class="list-container"></div>

        <footer>
            <a href="https://jaywyss.me" class="copy-link">Â© 2025 Jay Wyss, MPA</a>
            <div class="partner">Thought Partner: Gemini</div>
        </footer>
    </div>

    <style is:global>
        /* This forces the app to ignore outside styles */
        html, body#pace-pro-app {
            background-color: #020617 !important;
            color: #ffffff !important;
            margin: 0 !important;
            padding: 0 !important;
            font-family: system-ui, -apple-system, sans-serif !important;
        }

        #pace-pro-app .wrapper {
            max-width: 420px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        #pace-pro-app h1 { font-size: 48px; font-weight: 900; font-style: italic; text-align: center; margin: 20px 0 10px; letter-spacing: -2px; }
        #pace-pro-app .sky { color: #38bdf8; }
        
        #pace-pro-app .toggle-btn { display: block; margin: 0 auto 30px; background: #1e293b; color: #38bdf8; border: 1px solid #334155; padding: 8px 18px; border-radius: 20px; font-size: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; }

        #pace-pro-app .control-panel { background: #0f172a; border: 2px solid #1e293b; border-radius: 16px; padding: 24px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        #pace-pro-app .main-select { width: 100%; background: #1e293b; color: white; border: 1px solid #334155; border-radius: 8px; padding: 12px; font-size: 14px; font-weight: 700; margin-bottom: 20px; }

        #pace-pro-app .time-display { display: flex; justify-content: center; align-items: baseline; gap: 5px; margin-bottom: 20px; }
        #pace-pro-app .t-input { background: transparent; border: none; border-bottom: 3px solid #334155; color: white; font-size: 64px; font-weight: 900; width: 90px; text-align: center; outline: none; }
        #pace-pro-app .sep { font-size: 32px; font-weight: 900; color: #475569; }

        #pace-pro-app .f-header { display: flex; justify-content: space-between; font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; }
        #pace-pro-app input[type=range] { width: 100%; accent-color: #38bdf8; cursor: pointer; }

        #pace-pro-app .section-label { font-size: 12px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin: 30px 0 12px 10px; border-left: 4px solid #334155; padding-left: 10px; }
        
        #pace-pro-app .card-box { background: #0f172a; border: 1px solid #1e293b; border-radius: 8px; padding: 15px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid transparent; }
        #pace-pro-app .card-box.active { border-color: #38bdf8; background: rgba(56, 189, 248, 0.1); }
        
        #pace-pro-app .label-col { display: flex; flex-direction: column; }
        #pace-pro-app .main-lbl { font-size: 15px; font-weight: 700; color: white; }
        #pace-pro-app .sub-lbl { font-size: 10px; color: #94a3b8; text-transform: uppercase; font-weight: 800; margin-top: 2px; }
        #pace-pro-app .pace-val { font-family: monospace; font-size: 24px; font-weight: 700; color: #38bdf8; }

        #pace-pro-app .red-b { border-left-color: #ef4444; }
        #pace-pro-app .orange-b { border-left-color: #f97316; }
        #pace-pro-app .yellow-b { border-left-color: #facc15; }
        #pace-pro-app .blue-b { border-left-color: #3b82f6; }
        #pace-pro-app .green-b { border-left-color: #22c55e; }

        #pace-pro-app .hidden { display: none; }
        #pace-pro-app footer { margin-top: 50px; padding: 20px 0; border-top: 1px solid #1e293b; text-align: center; }
        #pace-pro-app .copy-link { font-size: 11px; color: #94a3b8; text-decoration: none; font-weight: 700; text-transform: uppercase; }
        #pace-pro-app .partner { font-size: 9px; color: #475569; margin-top: 5px; font-style: italic; }
    </style>

    <script is:inline>
        const dSel = document.getElementById('dist-select');
        const hIn = document.getElementById('hr');
        const mIn = document.getElementById('min');
        const sIn = document.getElementById('sec');
        const hWrap = document.getElementById('hr-wrap');
        const uTog = document.getElementById('unit-toggle');
        const fSli = document.getElementById('fudge-slider');
        const fVal = document.getElementById('fudge-val');

        let isM = false;

        const R_MAP = [
            { n: "800m", f: 0.12818 }, { n: "1,600m", f: 0.2800 },
            { n: "3,200m", f: 0.60818 }, { n: "5,000m", f: 1.0 },
            { n: "10,000m", f: 2.1 }, { n: "Half Marathon", f: 4.6418 },
            { n: "Marathon", f: 9.7045 }
        ];

        const T_MAP = [
            { n: "800m Reps", s: "Per 400m", f: 0.80 / 4, t: 'red' },
            { n: "1,600m Reps", s: "Per 400m", f: 0.875 / 4, t: 'red' },
            { n: "3,200m Reps", s: "Per 400m", f: 0.95 / 4, t: 'red' },
            { n: "5,000m Reps", s: "Per 400m", f: 1.0 / 4, t: 'red' },
            { n: "Critical Velocity", f: 1.025, t: 'orange' },
            { n: "10,000m", f: 1.05, t: 'orange' },
            { n: "Threshold", f: 1.075, t: 'orange' },
            { n: "Half Marathon", f: 1.10, t: 'yellow' },
            { n: "Marathon", f: 1.15, t: 'yellow' },
            { n: "GAP (High)", f: 1.20, t: 'blue' },
            { n: "GAP (Low)", f: 1.40, t: 'blue' },
            { n: "Pretty Easy", f: 1.50, t: 'green' },
            { n: "Easy", f: 1.60, t: 'green' },
            { n: "Very Easy", f: 1.70, t: 'green' },
            { n: "Regeneration", f: 1.80, t: 'green' }
        ];

        function fmt(s) {
            s = Math.round(s);
            const h = Math.floor(s / 3600);
            const m = Math.floor((s % 3600) / 60);
            const sc = s % 60;
            return h > 0 ? `${h}:${m.toString().padStart(2, '0')}:${sc.toString().padStart(2, '0')}` : `${m}:${sc.toString().padStart(2, '0')}`;
        }

        function run() {
            parseInt(dSel.value) > 10000 ? hWrap.classList.remove('hidden') : hWrap.classList.add('hidden');
            const fudge = 1 + (parseFloat(fSli.value) / 100);
            fVal.innerText = (fSli.value > 0 ? "+" : "") + fSli.value + "%";

            const inS = (parseInt(hIn.value || 0) * 3600) + (parseInt(mIn.value || 0) * 60) + parseInt(sIn.value || 0);
            const found = R_MAP.find(r => r.f.toString().includes(dSel.value) || (dSel.value == "5000" && r.f === 1.0));
            const anchor = inS / (found ? found.f : 1);

            document.getElementById('equiv-list').innerHTML = R_MAP.map(r => `
                <div class="card-box ${Math.abs(anchor * r.f - inS) < 1 ? 'active' : ''}">
                    <span class="sub-lbl">${r.n}</span>
                    <span class="pace-val">${fmt((anchor * r.f) * fudge)}</span>
                </div>`).join('');

            const uB = anchor / (isM ? 5.00 : 3.11);
            document.getElementById('training-engine').innerHTML = T_MAP.map(item => {
                const val = (uB * item.f) * fudge;
                let c = '#38bdf8';
                if (item.t === 'red') c = '#ef4444';
                if (item.t === 'orange') c = '#f97316';
                if (item.t === 'yellow') c = '#facc15';
                if (item.t === 'blue') c = '#3b82f6';
                if (item.t === 'green') c = '#22c55e';
                return `
                    <div class="card-box ${item.t}-b">
                        <div class="label-col">
                            <span class="main-lbl">${item.n}</span>
                            <span class="sub-lbl">${item.t === 'red' ? item.s : 'Pace /' + (isM ? 'km' : 'mi')}</span>
                        </div>
                        <span class="pace-val" style="color: ${c} !important;">${fmt(val)}</span>
                    </div>`;
            }).join('');
        }

        uTog.addEventListener('click', () => { isM = !isM; uTog.innerText = `Units: ${isM ? 'Metric (KM)' : 'Imperial (Miles)'}`; run(); });
        [dSel, hIn, mIn, sIn, fSli].forEach(e => e.addEventListener('input', run));
        run();
    </script>
</body>
</html>