---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
import ThemeIcon from './ThemeIcon.astro';
---

<header>
	<nav>
		<div class="brand">
			<a href="/">{SITE_TITLE}</a>
		</div>

		<div class="internal-links">
            <HeaderLink href="/blog">Blog</HeaderLink>
			<HeaderLink href="/projects">Projects</HeaderLink>
			<HeaderLink href="/now">Now</HeaderLink>
            
			<div class="theme-toggle-wrapper">
				<ThemeIcon />
			</div>
		</div>
	</nav>
</header>

<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: var(--background);
		position: sticky;
		top: 0;
		z-index: 100;
		backdrop-filter: blur(8px);
		-webkit-backdrop-filter: blur(8px);
		background: rgba(255, 255, 255, 0.9);
        border-bottom: 1px solid rgba(0,0,0,0.05); /* Added subtle border for separation */
	}

	:global(.dark) header {
		background: rgba(15, 11, 30, 0.9);
        border-bottom: 1px solid rgba(255,255,255,0.05);
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: var(--max-width);
		margin: auto;
		padding: 1.5em 0;
	}

	.brand a {
		font-family: var(--font-body);
		font-size: 1.4em;
		font-weight: 800; /* Extra bold for logo */
		letter-spacing: -0.5px;
		text-decoration: none;
		color: var(--text-main);
        transition: color 0.2s ease;
	}
    
    .brand a:hover {
        color: var(--accent); /* Hover effect for logo too */
    }

	.internal-links {
		display: flex;
		align-items: center;
		gap: 1.5em;
	}
    
    /* --- THE FIX: Hover Styles --- */
    /* We use :global(a) to reach inside the HeaderLink component */
    .internal-links :global(a) {
        text-decoration: none;
        color: var(--text-main);
        font-weight: 600;
        transition: color 0.2s ease; /* Makes the color change smooth */
    }

    .internal-links :global(a:hover) {
        color: var(--accent); /* This turns it Sage Green */
    }
    
    /* Active state (managed by HeaderLink class) */
    .internal-links :global(a.active) {
        color: var(--accent);
        /* Optional: Add a border-bottom if you want the underline back */
        /* border-bottom: 2px solid var(--accent); */
    }
	
	.theme-toggle-wrapper {
		display: flex;
		align-items: center;
		justify-content: center;
		padding-left: 0.5rem;
        border-left: 1px solid rgba(128,128,128, 0.2); /* Separator line */
        margin-left: 0.5rem;
	}

	@media (max-width: 600px) {
		nav {
			flex-direction: column;
			gap: 1rem;
			padding: 1rem 0;
		}

		.internal-links {
			gap: 1.2rem;
			font-size: 0.95rem;
		}
	}
</style>