---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import IntroSplash from '../components/IntroSplash.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';

// Fetch and sort posts for the "Fresh Clippings" section
const posts = (await getCollection('blog')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 3);
---

<!doctype html>
<html lang="en">
    <head>
        <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
        <style>
            .hero-section {
                padding: 3rem 0;
            }

            /* --- 1. THE NAME --- */
            .intro-name {
                font-family: var(--font-body);
                font-weight: 800;
                font-size: 3.5rem;
                margin: 0 0 2rem 0;
                color: var(--text-main); 
                line-height: 1;
                letter-spacing: -0.02em;
            }

            /* --- 2. THE BIO --- */
            .bio-content {
                font-family: var(--font-body); 
                font-size: 1.15rem;
                line-height: 1.7;
                color: var(--text-muted);
                max-width: 65ch;
            }

            .bio-content p {
                margin-bottom: 1.5rem; 
            }

            /* --- 3. CONSISTENT LINK STYLING --- */
            .bio-link {
                color: var(--text-main);
                text-decoration: none;
                font-weight: bold;
                /* The Sage Green Underline */
                border-bottom: 2px solid rgba(var(--accent), 0.4);
                transition: all 0.2s ease;
            }

            .bio-link:hover {
                background: rgba(var(--accent), 0.1);
                border-bottom-color: var(--accent);
                color: var(--accent);
            }

            /* --- FRESH CLIPPINGS --- */
            .recent-section {
                margin-top: 4rem;
            }

            .section-label {
                font-size: 0.85rem;
                text-transform: uppercase;
                letter-spacing: 0.1em;
                color: var(--accent);
                font-weight: bold;
                margin-bottom: 1.5rem;
                display: block;
            }

            .post-list {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .post-item {
                display: block;
                text-decoration: none;
                margin-bottom: 2rem;
            }

            .post-title {
                font-size: 1.5rem;
                /* Note: Kept serif for blog titles as per your snippet, change to var(--font-body) if you want all plain */
                font-family: 'Libre Baskerville', serif;
                color: var(--text-main);
                margin: 0 0 0.5rem 0;
                transition: color 0.2s;
            }

            .post-item:hover .post-title {
                color: var(--accent);
            }

            .post-date {
                font-size: 0.9rem;
                color: var(--text-muted);
                font-family: var(--font-body);
            }
            
            .post-desc {
                margin-top: 0.5rem;
                font-size: 1rem;
                color: var(--text-muted);
                line-height: 1.6;
            }
        </style>
    </head>
    <body>
        <IntroSplash />
        <Header />
        <main>
            <section class="hero-section">
                
                <h1 class="intro-name">Hi, I'm Jay.</h1>

                <div class="bio-content">
                    <p>
                        Professionally, I'm a recovering management consultant. Currently, I serve as the Technology Director at <a href="#" class="bio-link">Affinity Group Underwriters</a>. On the side, I coach cross country and track & field at <a href="http://www.tuckertrack.com" target="_blank" class="bio-link">J.R. Tucker High School</a>.
                    </p>
                    <p>
                        I'm a proud VCU Ram (History & Pol Sci '09, MPA '12) and earned my Master's while serving as a Graduate Assistant for VCU Athletics â€” easily the best job ever (Where else would a nerdy runner get to be part of a basketball team's historic Final Four run?)
                    </p>
                    <p>
                        As an undergraduate, I competed for VCU's Cross Country and Track & Field teams, where I set the university's records in the 3K, 10K, and 4 x Mile Relay that still stand today.
                    </p>
                    <p>
                        This site is my digital garden where I write about <a href="/blog" class="bio-link">coaching, technology, and public policy</a>.
                    </p>
                </div>
            </section>

            <hr />

            <section class="recent-section">
                <span class="section-label">Fresh Clippings</span>
                <ul class="post-list">
                    {posts.map((post) => (
                        <li>
                            <a href={`/blog/${post.slug}/`} class="post-item">
                                <h3 class="post-title">{post.data.title}</h3>
                                <div class="post-date">
                                    {post.data.pubDate.toLocaleDateString('en-us', {
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric',
                                    })}
                                </div>
                                <p class="post-desc">{post.data.description}</p>
                            </a>
                        </li>
                    ))}
                </ul>
            </section>
        </main>
        <Footer />
    </body>
</html>